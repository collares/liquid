\subsection{Spaces of Measures}

\begin{definition}
  \label{real-measures}
  \lean{real_measures}
  \leanok
  Let $0 < p' < 1$ be a real number, and let $S$ be a finite set.
  Denote by $\Rm(S)$ the real vector space
\[
\Rm(S)=\left\{\sum_{s\in S}a_{s}[s] \text{ such that } a_{s}\in \R\right\}
\]
endowed with the $\ell^{p'}$-norm $\Vert \sum_{s\in S}a_s[s]\Vert_{\ell^{p'}}=\sum_{s\in S}\lvert a_s\rvert ^{p'}$. We refer to its elements as (real) $\ell^{p'}$-measures on $S$.
\end{definition}
For every finite set $S$, the space $\Rm(S)$ can be written as the filtered colimit (in this case, a union)
\[
\Rm(S)=\varinjlim_{c>0}\Rm(S)_{\leq c}
\]
where $\Rm(S)_{\leq c}=\left\{F \in \Rm(S) \text{ such that } \Vert F \Vert_{\ell^{p'}}\leq c\right\}$. Now, given a profinite set $S=\varprojlim S_i$, where all the $S_i$ are finite groups, and a positive real number $c>0$, define $\Rm(S)_{\leq c}$ as
\[
\Rm(S)_{\leq c}=\varprojlim \Rm(S_i)_{\leq c}
\]
and endow the limit with the inductive limit topology. Finally, set $\Rm(S)=\varinjlim_{c}\Rm(S)_{\leq c}$.

We now switch to Laurent measures, an ``arithmetic'' version of the above-defined real $\ell^{p'}$-measures.

\begin{definition}
  \label{laurent-measures-fin}
  \lean{laurent_measures}
  \leanok
  Let $0 < r' < 1$ be a real number, and let $S$ be a finite set. We denote by $\Lm_{r'}(S)$ the group
\[
	\Lm_{r'}(S)=\{\sum_{s\in S,n\in \Z}a_{n,s}T^n[s] \mid a_{n,s}\in \Z, \sum_{n\in\Z, s\in S}\lvert a_{n,s}\rvert r^n
< + \infty\}.
\]
and we refer to its elements as Laurent measures (on $S$).
The group $\Lm_{r'}(S)$ is filtered by the subsets
\[
	\Lm_{r'}(S)_{\leq c}=\bigl\{\sum_{s\in S,n\in \Z}a_{n,s}T^n[s] \mid a_{n,s}\in \Z, \sum_{n\in\Z, s\in S}\lvert a_{n,s}\rvert r^n
\leq c\bigr\}
\]
for $c> 0$. Each subset $\Lm_{r'}(S)_{\leq c}$ can be written as
\[
\Lm_{r'}(S)_{\leq c}=\varprojlim_{A}\Lm_{r'}(S)_{A,\leq c}
\]
where $A$ runs through the finite subsets of $\Z$ and $\Lm_{r'}(S)_{A,\leq c}$ is the finite set
\[
	\Lm_{r'}(S)_{A,\leq c}=\bigl\{\sum_{s\in S,n\in A}a_{n,s}T^n[s] \mid a_{n,s}\in \Z, \sum_{n\in A, s\in S}\lvert a_{n,s}\rvert r^n\leq c\bigr\}.
\]
This defines a profinite topology on $\Lm_{r'}(S)_{\leq c}$, for each $c>0$.
\end{definition}
Passing to the limit, we obtain the Laurent measures on an arbitrary profinite set $S$ as follows. 
%\begin{definition}
% \label{laurent-measures}
% \lean{laurent_measures}
% \leanok
%  Let $0 < r' < 1$ be a real number, and let $S$ be a profinite set with 
Choose a presentation $S=\varprojlim S_i$, where all the $S_i$ are finite; given any $c>0$, define the space $\Lm_{r'}(S)_{\leq c}$ as the limit
\[
\Lm_{r'}(S)_{\leq c}=\varprojlim\Lm_{r'}(S_i)_{\leq c},
\]
endowed with the inductive limit topology. Then set
\[
\Lm_{r'}(S)=\varinjlim_{c > 0}\Lm_{r'}(S)_{\leq c}
\]
%\end{definition}

%For every $\alpha\in\R$ let $\lfloor \alpha\rfloor\in\Z$ be the largest integer that satisfies $\lfloor \alpha\rfloor\le \alpha$: in particular,
%\[
%  \alpha-1 < \lfloor \alpha\rfloor\le \alpha
%  \qquad\text{and}\qquad
%  \alpha\geq 0 \Longrightarrow \lfloor \alpha\rfloor \geq 0.
%\]

%Now fix $0< \xi<1$ and let $x\in\R_{\geq 0}$.
For simplicity, we denote by $\Z(\!(T)\!)_{r'}$ the group $\Lm_{r'}(\ast)$. 
%The next theorem is the first statement of Theorem~6.9 in~\cite{Analytic}.

%\begin{lemma}
%  \label{theta.finite_sum}
%  \uses{theta-y}
%  \lean{theta.finite_sum}
%  \leanok
%  For all $n\in\N$, we have
%  \[
%    y_{n+1} = x - \sum_{i=0}^n \Big\lfloor \frac{y_i}{\xi^i} \Big\rfloor \xi^i.
%  \]
%\end{lemma}
%
%\begin{proof}
%  \leanok
%  By induction: when $n=0$ this boils down to
%  \[
%    y_1=x-\left\lfloor \frac{y_0}{\xi^0}\right\rfloor \xi^0
%  \]
%  which is the definition of $y_1$ since $x=y_0$.
%
%	The step $n\to (n+1)$ goes as follows:
%	\[
%		y_{n+1} \overset{\text{def}}{=} y_{n} - \left\lfloor \frac{y_{n}}{\xi^{n}} \right\rfloor \xi^{n}
%		\overset{\text{Ind.}}{=} \left(x - \sum_{i=0}^{n-1} \Big\lfloor \frac{y_i}{\xi^i} \Big\rfloor\xi^i\right) -
%		\left\lfloor \frac{y_{n}}{\xi^{n}} \right\rfloor\xi^{n}
%		= x - \sum_{i=0}^n \Big\lfloor \frac{y_i}{\xi^i} \Big\rfloor \xi^i.
%		\qedhere
%	\]
%\end{proof}

%\begin{lemma}
%  \label{theta.bounded}
%  \uses{theta-y}
%	The sequence
%	\[
%		n \mapsto \left\lfloor \frac{y_n}{\xi^n} \right\rfloor
%	\]
%	is bounded.
%\end{lemma}

%\begin{proof}
%	By definition, for all $n\geq 1$,
%	\[
%		\frac{y_n}{\xi^n} = \frac{1}{\xi^n} \left(y_{n-1} - \left\lfloor \frac{y_{n-1}}{\xi^{n-1}} \right\rfloor \xi^{n-1}\right)
%    = \frac{1}{\xi} \left(\frac{y_{n-1}}{\xi^{n-1}} - \left\lfloor \frac{y_{n-1}}{\xi^{n-1}} \right\rfloor\right)
%    \le \frac{1}{\xi}\cdot 1
%    = \frac{1}{\xi}
%  \]
%  Thus, the sequence $n\mapsto \frac{y_n}{\xi^n}$ is bounded by $\max\{x=y_0,\xi^{-1}\}$
%  and the same holds, \emph{a fortiori}, for the sequence $n\mapsto \lfloor\frac{y_n}{\xi^n}\rfloor$. 
%\end{proof}

%\begin{lemma}
%  \label{theta.limit_y}
%  \uses{theta-y}
%  \lean{theta.limit_y}
%  \leanok
%  We have
%  \[
%    \lim_{n\to+\infty} y_n =0.
%  \]
%\end{lemma}
%
%\begin{proof}
%  \uses{theta.bounded}
%  \leanok
%  Indeed, for every $n\in \N$,
%  \[
%    \frac{y_n}{\xi^n} - 1 <\left\lfloor{\frac{y_n}{\xi^n}}\right\rfloor \le \frac{y_n}{\xi^n}
%  \]
%  so, multiplying everything by $\xi^n > 0$,
%  \[
%    y_n - \xi^n <\left\lfloor{\frac{y_n}{\xi^n}}\right\rfloor\xi^n \le y_n.
%  \]
%  Taking limits,
%  \[
%    \lim_{n\to+\infty} y_n - \lim_{n\to+\infty} \xi^n
%    = \lim_{n\to+\infty} y_n
%    \le \lim_{n\to+\infty} \left\lfloor \frac{y_n}{\xi^n} \right\rfloor \xi^n
%    = 0\le\lim_{n\to+\infty} y_n.
%  \]
%  By Lemma~\ref{theta.bounded},
%  the term $\left\lfloor\frac{y_n}{\xi^n}\right\rfloor\xi^n$
%  tends to $0$ as $n\to +\infty$ because $0<\lvert \xi\rvert< 1$.
%  The lemma follows.
%\end{proof}

%\begin{proposition}
%  \label{theta.has_sum_x}
%  \uses{theta-y}
%  \lean{theta.has_sum_x,theta.summable_floor}
%  \leanok
%  %For all $i\in\N$, let
%  %\[
%  %a_i=\left\lfloor\frac{y_i}{\xi^i}\right\rfloor \in \N.
%  %\]
%  %The sequence $i\mapsto a_i\in \N$, satisfies
%  \begin{enumerate}
%    \item For all $0<r <1$,
%      \[
%        \sum_{i=0}^{+\infty} \left\lfloor\frac{y_i}{\xi^i}\right\rfloor r^i \qquad\text{converges}.
%      \]
%    \item
%      \[
%        \sum_{i=0}^{+\infty} \left\lfloor\frac{y_i}{\xi^i}\right\rfloor\xi^i = x;
%      \]
%  \end{enumerate}
%\end{proposition}
%
%\begin{proof} 
%  \uses{theta.bounded,theta.finite_sum,theta.limit_y}
%  \leanok
%  The first point follows from Lemma~\ref{theta.bounded}, using that $0<r<1$.
%
%  For the second point, taking limits in Lemma~\ref{theta.finite_sum}, we obtain
%  \[
%    \lim_{n\to +\infty}y_{n+1}=x-\sum_{i=0}^{+\infty}a_i\xi^i.
%  \]
%  The result follows from Lemma~\ref{theta.limit_y}.
%\end{proof}

%Now fix $0< \xi<1$ and let $x\in\R_{\geq 0}$. For simplicity, denote by $\Z(\!(T)\!)_{r'}$ the group $\Lm_{r'}(\ast)$.
%One of the key results proven in \cite[\S 6]{Analytic} is the surjectivity and continuity of the following map.

\begin{definition}
  \label{theta}
  \lean{theta.ϑ}
  \uses{laurent-measures}
  \leanok
  Let $0<\xi <1$ be a real number. Denote by $\vartheta_{\xi}\colon \Z(\!(T)\!)_{r'}\rightarrow \R$ the evaluation map
  \[
    \sum a_nT^n\longmapsto \sum a_n\xi^n.
  \]
induced by $T\mapsto \xi$.
\end{definition}

One of the key results proven in \cite[\S 6]{Analytic} is the surjectivity and continuity of the map $\vartheta_\xi$, together with a proof that its kernel is principal for every $0<\xi<1$. To state this result, we begin with the following lemma.

% \begin{definition}
%  \label{theta.y}
%  \lean{theta.y}
%  \leanok
%	, namely the greatest integer that is less or equal than $\ast$.
%\end{definition}

\begin{lemma}
  \label{theta-surjective}
  \uses{theta}
  \lean{theta.ϑ_surjective}
  \leanok
  The map $\vartheta_{\xi}$ is surjective.
\end{lemma}

\begin{proof}
  \uses{theta-y}
  \leanok
  Given $n\in\N$ and $x\in\R$, set
	\[
		Y_\xi(x, n)=
		\begin{cases}
			x&\text{ if } n = 0 \\
			Y_\xi(x,n-1) - \left\lfloor \frac{Y_\xi(x,n-1)}{\xi^{n-1}} \right\rfloor \xi^{n-1} & \text{ if } n \ge 1
		\end{cases}
	\]
where $\lfloor \ast \rfloor$ denotes the floor of $\ast$. Consider the power series
  \[
    F(T)=\sum_{n\geq 0}\left\lfloor \frac{Y_\xi(x,n)}{\xi^n}\right\rfloor T^n\in\Z[\![T]\!].
  \]
	The fact that $0<\xi<1$ ensures that the series converges on the open unit disk, so it actually belongs to $\Z(\!(T)\!)_{r'}$ and it can be proven that $F(\xi)=x$.
%  By Proposition~\ref{theta.has_sum_x}, the series converges on the open unit disks,
%  so it belongs to $\Z((T))_r$ and it specializes to $x$ when evaluated at $T=\xi$.
\end{proof}
The next lemma allows to compare the seemingly uncorrelated topologies on the spaces of \emph{real} and of \emph{Laurent} measures:
\begin{lemma}
	\label{theta-continuous}
	\uses{theta, laurent-measures-fin, real-measures}
	\lean{laurent_measures_ses.continuous_θ_c}
	\leanok
Fix a finite set $S$, real numbers $0<\xi,p'<1$ and set $r'=(\xi)^{p'}$. The map $\vartheta_\xi$ of Definition~\ref{theta} is continuous when endowing $\Lm_{r'}(S)$ with the topology defined in Definition~\ref{laurent-measures-fin} and $\Rm(S)$ with the topology defined in Definition~\ref{real-measures}
\end{lemma}
\begin{proof}
  \leanok
  Omitted for now, but done in Lean.
\end{proof}

Given any finite set $S$, the map $\vartheta_{\xi}$ defines a map $\vartheta_{\xi,S}\colon \Lm_{r'}(S)\longrightarrow \Rm(S)$ by extending $\vartheta_{\xi}$ componentwise. For the purpose of this project, the special case where $\xi=1/2$ is enough, and we write $\theta_S$ from now on to denote $\vartheta_{\xi,S}$. 

%By taking projective limits, we obtain a map $\vartheta_{S}$ for every profinite $S$.

\begin{theorem}
  \label{theta-exact_finite}
  \uses{theta, laurent-measures-fin}
  \leanok
  \lean{θ_ϕ_exact}
Let $0<p'<1$ be a real number, let $S$ be a finite set, and let $r'$ denote $\left(\frac{1}{2}\right)^{p'}$. The sequence
\[
0\longrightarrow\Lm_{r'}(S)\longrightarrow \Lm_{r'}(S)\overset{\theta_S}{\longrightarrow} \Rm(S)\longrightarrow 0,
\]
where the first map is multiplication by $2T-1$, is exact. In particular, the kernel of $\theta_S$ is principal, generated by $2T-1$.%induced by evaluating $T$ at $1/2$ is continuous and surjective. Its kernel is principal, hence isomorphic to $\Lm_{r'}(S)$.
\end{theorem}
\begin{proof}
  \uses{theta, theta.surjective, theta.continuous}
  \leanok
The proof of surjectivity for finite $S$ follows immediately from Lemma~\ref{theta-surjective}, and the description of the kernel is straightforward. Similarly, the proof of continuity is a direct consequence of Lemma~\ref{theta-continuous}.
\end{proof}
%With Theorem~\ref{theta.prof_surj_and_cont} at our disposal, we can move on and analyse the kernel of the map $\theta_{S}$.


%For any choice of a real number $0<p'<1$ Theorem~\ref{theta.exact_finite} induces, by taking limits, an exact sequence
%\[
%0\longrightarrow\Lm_{r'}(S)\longrightarrow \Lm_{r'}(S)\longrightarrow \Rm(S)\longrightarrow 0
%\]
%for every profinite set $S$, where again $r'$ denotes $\bigl(\frac{1}{2}\bigr)^{p'}$.
